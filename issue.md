# 현재 이슈 정리

## 1) 사망 후 캐릭터가 누워 있는 문제

- 상태: Open
- 우선순위: Medium
- 증상: 사망(`death`) 이후 캐릭터가 서 있는 자세가 아니라 옆으로 누운 자세로 고정됨.
- 재현 방법:
  1. 전투 중 캐릭터 HP를 0으로 만든다.
  2. 사망 연출이 끝난 뒤 자세를 확인한다.
- 기대 결과: 사망 후에도 기획 의도에 맞는 자세(예: 무릎 꿇음/비틀거림/직립 유지)로 유지되어야 함.
- 실제 결과: 캐릭터가 바닥에 누운 자세로 유지됨.
- 코드 위치:
  - `main.js`의 `animateHero()` 내 `hero.state === "dead"`
  - `main.js`의 `animateMinotaur()` 내 `minotaur.state === "dead"`
- 참고: 현재 dead 상태에서 `rig.hips.rotation.z` 값을 크게 주고 있어 의도적으로 눕는 포즈가 만들어질 가능성이 큼.

## 2) 벽 충돌 후 시점/이동 방향 불일치 문제

- 상태: Open
- 우선순위: High
- 증상: 벽(아레나 경계)에 부딪힌 뒤 카메라 시점 변화와 캐릭터 전면 방향 감각이 어긋나며, `WASD` 이동이 이상하게 느껴짐.
- 재현 방법:
  1. 캐릭터를 아레나 외곽 경계까지 이동한다.
  2. 경계에 닿은 상태에서 방향 전환과 `WASD` 입력을 반복한다.
  3. 카메라 체감 방향과 이동 입력 방향의 일치 여부를 확인한다.
- 기대 결과: 경계 충돌 여부와 관계없이 `WASD` 입력, 캐릭터 전면, 카메라 추적 방향이 일관되어야 함.
- 실제 결과: 경계 근처에서 캐릭터가 회전해도 이동/시점 체감이 일치하지 않는 상황이 발생함.
- 코드 위치:
  - `main.js`의 `updateHero()` 입력 처리 구간
  - `main.js`의 `clampToArena()` 경계 보정
  - `main.js`의 `updateCamera()` 카메라 추적 계산
- 참고: 이동 벡터가 월드축 기준(`WASD -> x/z`)이고, 카메라는 캐릭터 회전 기반 오프셋을 쓰기 때문에 경계 보정 시 체감 불일치가 발생할 수 있음.

## README 기준 검증 결과

- 점검 일시: 2026-02-15
- 결과: 대부분 일치, 일부 문서-코드 불일치 1건 발견

### 일치 항목

- 조작키: `WASD`, `Shift`, `J`, 마우스 좌클릭, `R` 모두 구현됨.
- 프로토타입 구성: 플레이스홀더 모델, 전투 루프, HP UI/상태 텍스트, 원형 아레나 구현됨.
- `main.js` 문법 점검: `node --check main.js` 통과.

### 불일치 항목

- README의 Three.js 로드 예시(`unpkg.com/three@0.161.0/build/three.min.js`)는 현재 환경에서 404 가능성이 있음.
- 실제 코드(`index.html`)는 CDN 폴백 로더(`jsDelivr 0.160.1` -> `jsDelivr latest path` -> `unpkg latest path`)를 사용 중.

### 권장 조치

- README 2번 섹션의 Three.js 로드 안내를 현재 `index.html` 로딩 방식과 동일하게 업데이트.
